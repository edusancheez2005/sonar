(()=>{var e={};e.id=909,e.ids=[909],e.modules={9608:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=9608,e.exports=t},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},950:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>v,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h});var s={};r.r(s),r.d(s,{POST:()=>c});var i=r(9303),n=r(8716),o=r(670),a=r(7070),u=r(7574);function p(e){if(!e)return"Unknown error";if("string"==typeof e)return e;if(e.message)return e.message;try{return JSON.stringify(e)}catch{return String(e)}}async function c(e){try{let{email:t,redirectTo:r,password:s}=await e.json();if(!t)return a.NextResponse.json({ok:!1,error:"Missing email"},{status:400});let i=r||"http://localhost:4000/auth/callback",{data:n,error:o}=await u.p.auth.admin.inviteUserByEmail(t,{redirectTo:i});if(!o)return a.NextResponse.json({ok:!0,mode:"invite",data:n});let{data:c,error:d}=await u.p.auth.admin.generateLink(s?{type:"signup",email:t,password:s,options:{redirectTo:i}}:{type:"magiclink",email:t,options:{redirectTo:i}});if(d)return a.NextResponse.json({ok:!1,error:p(d),smtpError:p(o)},{status:400});return a.NextResponse.json({ok:!0,mode:s?"signup":"magiclink",action_link:c?.properties?.action_link,smtpError:p(o)})}catch(e){return a.NextResponse.json({ok:!1,error:p(e)},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/test-invite/route",pathname:"/api/auth/test-invite",filename:"route",bundlePath:"app/api/auth/test-invite/route"},resolvedPagePath:"/Users/edusanchez/sonar/app/api/auth/test-invite/route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:h,serverHooks:m}=d,x="/api/auth/test-invite/route";function v(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}},7574:(e,t,r)=>{"use strict";r.d(t,{p:()=>s});let s=(0,r(9498).eI)(process.env.SUPABASE_URL,process.env.SUPABASE_SERVICE_ROLE,{auth:{persistSession:!1}})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,498,972],()=>r(950));module.exports=s})();