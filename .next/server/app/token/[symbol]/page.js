(()=>{var e={};e.id=490,e.ids=[490],e.modules={9608:e=>{function s(e){var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}s.keys=()=>[],s.resolve=s,s.id=9608,e.exports=s},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},7367:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>h,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(1956),r(2552),r(6926),r(8191),r(8258);var t=r(3191),n=r(8716),a=r(7922),i=r.n(a),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(s,l);let d=["",{children:["token",{children:["[symbol]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1956)),"/Users/edusanchez/sonar/app/token/[symbol]/page.jsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2552)),"/Users/edusanchez/sonar/app/layout.jsx"],error:[()=>Promise.resolve().then(r.bind(r,6926)),"/Users/edusanchez/sonar/app/error.jsx"],loading:[()=>Promise.resolve().then(r.bind(r,8191)),"/Users/edusanchez/sonar/app/loading.jsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,8258)),"/Users/edusanchez/sonar/app/not-found.jsx"]}],c=["/Users/edusanchez/sonar/app/token/[symbol]/page.jsx"],h="/token/[symbol]/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/token/[symbol]/page",pathname:"/token/[symbol]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7574:(e,s,r)=>{"use strict";r.d(s,{p:()=>t});let t=(0,r(9498).eI)(process.env.SUPABASE_URL,process.env.SUPABASE_SERVICE_ROLE,{auth:{persistSession:!1}})},1956:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>d,generateMetadata:()=>i,revalidate:()=>a});var t=r(9510);r(1159);var n=r(7574);let a=15;async function i({params:e}){let s=decodeURIComponent(e.symbol),r=`Token ${s} — Whale Trades, Volume & Net Flow`,t=`Live ${s} whale transactions, 24h volume, net flow, buy/sell counts, unique whales, and chain split.`,n=`https://www.sonartracker.io/token/${encodeURIComponent(s)}`;return{title:r,description:t,alternates:{canonical:n},openGraph:{title:r,description:t,url:n},twitter:{title:r,description:t}}}function o({symbol:e}){let s={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://sonartracker.io/"},{"@type":"ListItem",position:2,name:"Tokens",item:"https://sonartracker.io/tokens"},{"@type":"ListItem",position:3,name:e,item:`https://sonartracker.io/token/${encodeURIComponent(e)}`}]};return t.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(s)}})}function l({side:e}){let s=(e||"").toLowerCase();return t.jsx("span",{className:"buy"===s?"buy":"sell"===s?"sell":"transfer",style:{padding:"0.25rem 0.5rem",borderRadius:999,fontWeight:500},children:e||"-"})}async function d({params:e,searchParams:s}){let r=decodeURIComponent(e.symbol),a=Number(s?.sinceHours||24),i=s?.minUsd?Number(s.minUsd):void 0,d=new Date(Date.now()-(a>0?a:24)*36e5).toISOString(),c=n.p.from("whale_transactions").select("transaction_hash,timestamp,blockchain,token_symbol,classification,usd_value,from_address,whale_score").eq("token_symbol",r).gte("timestamp",d).order("timestamp",{ascending:!1});"number"!=typeof i||Number.isNaN(i)||(c=c.gte("usd_value",i));let{data:h,error:p}=await c.limit(200),m=0,u=0,x=0,y=0,g=new Set,j=new Map;for(let e of h||[]){let s=Number(e.usd_value||0);m+=s;let r=(e.classification||"").toLowerCase();"buy"===r?(x+=1,u+=s):"sell"===r&&(y+=1,u-=s),g.add(e.from_address||""),j.set(e.blockchain||"—",(j.get(e.blockchain||"—")||0)+1)}let b=g.size,f=Array.from(j.entries()).sort((e,s)=>s[1]-e[1]);return(0,t.jsxs)("main",{className:"container",style:{padding:"2rem"},children:[t.jsx(o,{symbol:r}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[t.jsx("h1",{style:{margin:0},children:r}),(0,t.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[t.jsx("a",{className:1===a?"buy":"",href:`/token/${encodeURIComponent(r)}?sinceHours=1`,children:"1h"}),t.jsx("a",{className:6===a?"buy":"",href:`/token/${encodeURIComponent(r)}?sinceHours=6`,children:"6h"}),t.jsx("a",{className:24===a?"buy":"",href:`/token/${encodeURIComponent(r)}?sinceHours=24`,children:"24h"}),t.jsx("a",{className:72===a?"buy":"",href:`/token/${encodeURIComponent(r)}?sinceHours=72`,children:"3d"}),t.jsx("a",{className:168===a?"buy":"",href:`/token/${encodeURIComponent(r)}?sinceHours=168`,children:"7d"})]})]}),(0,t.jsxs)("div",{style:{marginTop:"0.5rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(0,t.jsxs)("div",{children:["Total Volume: $",Math.round(m).toLocaleString()]}),(0,t.jsxs)("div",{children:["Net Flow: $",Math.round(u).toLocaleString()]}),(0,t.jsxs)("div",{children:["Buys: ",x]}),(0,t.jsxs)("div",{children:["Sells: ",y]}),(0,t.jsxs)("div",{children:["Unique Whales: ",b]}),(0,t.jsxs)("form",{style:{marginLeft:"auto"},children:[t.jsx("input",{name:"minUsd",type:"number",min:"0",placeholder:"Min USD",defaultValue:i??"",style:{background:"var(--background-card)",border:"1px solid var(--secondary)",color:"var(--text-primary)",padding:"0.4rem 0.6rem",borderRadius:999}}),t.jsx("input",{type:"hidden",name:"sinceHours",value:a}),t.jsx("button",{className:"buy",style:{marginLeft:8},children:"Apply"})]})]}),(0,t.jsxs)("div",{style:{marginTop:"1rem"},children:[t.jsx("h2",{children:"Chain Split"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"8px"},children:f.map(([e,s])=>{let r=Math.max(6,Math.round(s/Math.max(...f.map(e=>e[1]),1)*100));return(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr 60px",gap:"10px",alignItems:"center"},children:[t.jsx("div",{style:{color:"var(--text-secondary)"},children:e}),t.jsx("div",{style:{background:"rgba(30,57,81,0.7)",height:12,borderRadius:6,overflow:"hidden"},children:t.jsx("div",{style:{width:`${r}%`,height:"100%",background:"linear-gradient(90deg, var(--primary), #2ecc71)"}})}),t.jsx("div",{style:{textAlign:"right",color:"var(--text-secondary)"},children:s})]},e)})})]}),(0,t.jsxs)("div",{style:{marginTop:"1rem"},children:[t.jsx("h2",{children:"Recent Trades"}),(0,t.jsxs)("table",{children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{children:[t.jsx("th",{children:"Time"}),t.jsx("th",{children:"Side"}),t.jsx("th",{style:{textAlign:"right"},children:"USD"}),t.jsx("th",{children:"Whale"}),t.jsx("th",{children:"Chain"}),t.jsx("th",{children:"Tx"})]})}),t.jsx("tbody",{children:(h||[]).slice(0,20).map(e=>(0,t.jsxs)("tr",{children:[t.jsx("td",{children:new Date(e.timestamp).toLocaleString()}),t.jsx("td",{children:t.jsx(l,{side:e.classification})}),(0,t.jsxs)("td",{style:{textAlign:"right"},children:["$",Math.round(Number(e.usd_value||0)).toLocaleString()]}),t.jsx("td",{children:(0,t.jsxs)("a",{href:`/whale/${encodeURIComponent(e.from_address||"-")}`,children:[e.from_address?.slice(0,6),"…",e.from_address?.slice(-4)]})}),t.jsx("td",{children:e.blockchain}),t.jsx("td",{children:(0,t.jsxs)("a",{href:"#",rel:"noopener noreferrer",children:[e.transaction_hash.slice(0,6),"…",e.transaction_hash.slice(-4)]})})]},e.transaction_hash))})]})]})]})]})}}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[948,199,498,212],()=>r(7367));module.exports=t})();